<li class="req">
  <a name="req_<%= req.id %>"></a>
  <div class="profile-image">
    <%= image_link req.person, :image => :thumbnail %>
    <%= image_tag "icons/arrow_right.gif", :class => "icon", :alt => "Request" %>
  </div>
  <% # disable - rendered with each bid now
     if false && req.has_accepted_bid? %>
    <%= render :partial => "shared/accepted_bid", :object => req.accepted_bid %>
  <% end -%>
  <p>
	
	<% if req.isoffer %>
		<%= "<em>Offer:</em> " if defined? show_type %>
		<%= link_to h(req.name), {:controller =>"offers",:action =>req.id}, :class => "show-follow" %>
	<% else %>
		<%= "<em>Request:</em> " if defined? show_type %>
		<%= link_to h(req.name), req, :class => "show-follow" %>
	<% end %>
	
	
	(<%= h req.estimated_hours %> Marbles)
    <span class="meta">Due: <%= relative_time_ago_in_words(req.due_date) %></span>
  </p>
<div class="col_content">
  <p class="meta">

	<%= req.categories.collect { |cat| cat.long_name + "<br />"}.to_s %>

  </p>
  <p>
    <% if defined? short %>
	      <%= display shorten(req.description, 100) %>
	<% else %>
    	  <%= display req.description %>
	<% end %>
  </p>
  <p class="meta">
	<% # disabled - rendered with each bid now
	%>
    <% if false && req.has_approved? %><%= approved_message(req) %><br><% end -%>
    <% if false && req.has_completed? %><%= completed_message(req) %><br><% end -%>
    <% if false && req.has_commitment? %><%= commitment_message(req) %><br><% end -%>
    <% if false && req.has_accepted_bid? %><%= accepted_message(req) %><br><% end -%>

    Posted by <%= person_link req.person %>
    <%= time_ago_in_words(req.created_at) %> ago
    <% if current_person?(req.person) -%>
     | <%= link_to "Edit", edit_req_path(req) #unless req.has_accepted_bid?
      %>
    <% end -%>
    <% if admin? || current_person?(req.person) -%>
      | <%= link_to "Delete", req, :confirm => 'Are you sure?', :method => :delete #unless (req.has_commitment? || req.has_approved?) 
      %>
    <% end -%>
    <br>
    <% if false && !current_person.address.nil? && !req.person.address.nil? && !current_person?(req.person) -%>
      <%= number_with_precision(req.person.address.distance_to(current_person.address)).to_s %> miles away
    <% end -%>
  </p>
</div>
</li>
